# 上线前检查清单

## 🔴 必须修复（阻塞上线）

### 1. 安全性加固
- [ ] **升级密码哈希算法**：从 SHA-256 改为 bcrypt 或 argon2
  - 位置：`src-tauri/src/utils/crypto.rs`
  - 影响：现有用户需要重置密码
  
- [ ] **实现 JWT Token**：替换简单的字符串拼接
  - 位置：`src-tauri/src/commands/auth.rs`
  - 添加依赖：`jsonwebtoken = "9.0"`

- [ ] **环境变量检查**：
  - 确认 `.env` 文件不在 Git 仓库中
  - 为部署环境准备独立的配置

### 2. 数据库初始化
- [ ] 修复 `database_init.sql` 中的潜在错误
- [ ] 测试完整的数据库初始化流程
- [ ] 准备数据库迁移方案

### 3. 错误处理
- [ ] 移除生产环境的 `console.log`
- [ ] 添加全局错误捕获机制
- [ ] 实现错误日志记录

---

## 🟡 强烈建议（影响用户体验）

### 1. 输入验证
- [ ] 添加后端用户名格式验证
- [ ] 添加密码强度要求（大小写+数字）
- [ ] 时间格式严格校验

### 2. 用户体验
- [ ] 添加离线状态检测
- [ ] 完善加载动画
- [ ] 打卡成功的视觉/听觉反馈
- [ ] 添加确认对话框（删除操作等）

### 3. 数据安全
- [ ] 实现数据备份功能
- [ ] 添加导出功能（CSV/Excel）
- [ ] 数据库定期备份计划

### 4. 性能优化
- [ ] 打卡记录分页显示
- [ ] 实现数据缓存机制
- [ ] 优化大量数据的渲染

---

## 🟢 建议优化（可延后）

### 1. 功能增强
- [ ] 多语言支持
- [ ] 深色/浅色主题切换完善
- [ ] 打卡统计图表可视化
- [ ] 请假/加班申请功能
- [ ] 移动端应用支持

### 2. 文档完善
- [ ] 编写用户使用手册
- [ ] 编写管理员操作指南
- [ ] 创建常见问题FAQ
- [ ] 准备培训材料

### 3. 运维支持
- [ ] 添加系统健康检查
- [ ] 实现日志监控
- [ ] 自动更新机制
- [ ] 崩溃报告收集

---

## 📋 上线部署检查

### 1. 环境准备
- [ ] Supabase 生产数据库已创建
- [ ] 数据库表结构已初始化
- [ ] 环境变量已正确配置
- [ ] SSL 证书已配置（如需要）

### 2. 应用打包
- [ ] 测试各平台打包（Windows/macOS/Linux）
- [ ] 验证打包后应用正常运行
- [ ] 检查应用图标和元信息
- [ ] 测试安装和卸载流程

### 3. 功能测试
- [ ] 注册新用户
- [ ] 用户登录/登出
- [ ] 所有打卡类型功能
- [ ] 管理员功能全覆盖
- [ ] 数据统计报表
- [ ] 手动补卡功能
- [ ] 编辑/删除记录

### 4. 性能测试
- [ ] 100+ 用户数据量测试
- [ ] 1000+ 打卡记录测试
- [ ] 并发操作测试
- [ ] 长时间运行稳定性

### 5. 安全测试
- [ ] SQL 注入测试
- [ ] XSS 攻击防护
- [ ] 权限控制测试
- [ ] 密码安全测试

### 6. 用户培训
- [ ] 准备培训文档
- [ ] 录制操作视频
- [ ] 安排用户培训
- [ ] 准备技术支持

---

## 🚀 建议的上线流程

### 阶段 1：内部测试（1-2 周）
1. 修复所有🔴必须修复的问题
2. 邀请 5-10 人内部测试
3. 收集反馈并修复 bug

### 阶段 2：小范围试运行（1-2 周）
1. 完成🟡强烈建议的优化
2. 选择一个部门试用
3. 监控系统运行状况

### 阶段 3：全面上线
1. 完成所有培训
2. 准备技术支持团队
3. 制定应急预案
4. 正式发布

---

## ⚡ 快速上线方案（最小可用版本）

如果需要快速上线，至少完成以下项：

### 关键修复（2-3 天）
1. ✅ 升级密码哈希到 bcrypt
2. ✅ 移除敏感的 console.log
3. ✅ 添加基本的错误处理
4. ✅ 测试核心打卡流程
5. ✅ 准备简单的用户手册

### 最小部署要求
- Supabase 数据库已配置
- 环境变量正确设置
- 核心功能可用
- 管理员培训完成

---

## 📞 技术支持准备

### 常见问题预案
1. **无法登录**
   - 检查用户名密码
   - 验证网络连接
   - 检查 Supabase 服务状态

2. **打卡失败**
   - 检查网络连接
   - 验证时间同步
   - 查看错误日志

3. **数据丢失**
   - 检查数据库备份
   - 联系技术支持
   - 执行数据恢复

### 联系方式
- 技术支持邮箱：[待填写]
- 紧急联系电话：[待填写]
- 问题反馈渠道：[待填写]

---

## ✅ 签署确认

- [ ] 项目负责人已审核
- [ ] 技术负责人已确认
- [ ] 测试团队已验证
- [ ] 用户培训已完成
- [ ] 备份方案已就绪

**上线日期：** _______________

**负责人签字：** _______________
